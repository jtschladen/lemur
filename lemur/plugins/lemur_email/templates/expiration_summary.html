{% extends "base.html" %}
{% block subject %}
Lemur certificate expiration summary
{% endblock %}
{% block body %}
                                            <tr>
                                                <td style="font-family:Roboto-Regular,Helvetica,Arial,sans-serif;font-size:13px;color:#202020;line-height:1.5">
                                                    <br>This is a summary of all certificates expiring soon.
                                                    Only certificates matching the configured expiration intervals are included here.
                                                    Certificates with notifications disabled have been omitted.
                                                    <table border="0" cellspacing="0" cellpadding="0" style="margin-top:12px;margin-bottom:48px">
                                                        <tbody>
                                                        {% for interval_and_certs in message["certificates"] | sort(attribute="interval") %}
                                                            <tr valign="middle">
                                                                <td width="32px"></td>
                                                                <td width="16px"></td>
                                                                <td style="line-height:1.2">
                                                                   <span style="font-family:Roboto-Regular,Helvetica,Arial,sans-serif;font-size:24px;color:#202020">
                                                                         <br>Expiring in {{ interval_and_certs["interval"] }} days<br>
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                            <tr valign="middle">
                                                                <td width="32px" height="12"></td>
                                                            </tr>
                                                            {% for certificate in interval_and_certs["certificates"] %}
                                                                <tr valign="middle">
                                                                    <td width="32px"></td>
                                                                    <td width="16px"></td>
                                                                    <td style="line-height:1.2">
                                                                        <span style="font-family:Roboto-Regular,Helvetica,Arial,sans-serif;font-size:16px;color:#202020">
                                                                            {{ certificate.name }}
                                                                        </span>
                                                                        <span style="font-family:Roboto-Regular,Helvetica,Arial,sans-serif;font-size:13px;color:#727272">
                                                                            {% if certificate.endpoints | length > 0 %}  <!-- highlight in red if > 0 -->
                                                                                <span style="font-family:Roboto-Regular,Helvetica,Arial,sans-serif;font-size:13px;color:#F44336">
                                                                                    <br>{{ certificate.endpoints | length }} Endpoints
                                                                                </span>
                                                                            {% else %}
                                                                                <br>{{ certificate.endpoints | length }} Endpoints
                                                                            {% endif %}
                                                                            <br>{{ certificate.owner }}
                                                                            <br>{{ certificate.validityEnd | time }}
                                                                            <a href="https://{{ hostname }}/#/certificates/{{ certificate.name }}" target="_blank">Details</a>
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                {% if not loop.last %}
                                                                    <tr valign="middle">
                                                                        <td width="32px" height="24px"></td>
                                                                    </tr>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% endfor %}
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="font-family:Roboto-Regular,Helvetica,Arial,sans-serif;font-size:13px;color:#202020;line-height:1.5">
                                                    Please take action if any of the above certificates are still needed.
                                                </td>
                                            </tr>
{% endblock %}
